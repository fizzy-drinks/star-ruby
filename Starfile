#!/usr/bin/env ruby

require "./lib/database_adapter/json"

app unhype

db Star::DatabaseAdapter::Json

model(tasks) {
  title { required string }
  created_at { date { DateTime.now } }
  date_due { date { DateTime.now } }
}

router {
  get "/" do
    models.tasks.where
  end

  post "/" do |req|
    models.tasks.create(title: req.body["title"])
  end
}

main {
  app.serve!
}
